(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{OYjW:function(l,n,e){"use strict";e.d(n,"a",function(){return u});var t=e("8Y7J"),a=(e("flBa"),e("s7LF"));class u{constructor(l){this.service=l,this.selectedId=null,this.parameterSet=new t.m}ngOnInit(){this.formSetup(),this.getParameterSetInfo(),this.service.newParameterSetMeta$.subscribe(l=>this.addNewMeta(l))}ngOnChanges(l){l.selectedId&&l.selectedId.currentValue&&this.setSelected(+this.selectedId)}formSetup(){this.parentForm.addControl("parameterSetId",new a.f("",a.v.required))}getParameterSetInfo(){this.service.getParameterSetMeta().subscribe(l=>{this.parameterSets=l,this.selectedId&&this.setSelected(this.selectedId)})}setSelected(l){this.parameterSets&&this.parameterSets.length>0&&(this.selected=this.parameterSets.find(n=>+n.id===l),this.parentForm.controls.parameterSetId.setValue(this.selected.id))}onParameterSetSelect(l){this.selectParameterSet(+l.value)}selectParameterSet(l){this.setSelected(l),this.parameterSet.emit(this.selected)}getError(){return this.parentForm.controls.parameterSetId.hasError("required")?"You must select a parameter set":""}addNewMeta(l,n=!1){this.parameterSets.find(n=>+n.id==+l.id)||this.parameterSets.unshift(l),n&&(this.selectParameterSet(+l.id),this.parentForm.controls.parameterSetId.setValue(this.selected.id))}}},ebK6:function(l,n,e){"use strict";var t=e("8Y7J"),a=e("MlvX"),u=e("Xd0L"),r=e("HsOI"),i=e("dJrM"),o=e("s7LF"),d=e("IP0z"),s=e("/HVE"),b=e("omvX"),c=e("Azqq"),m=e("JjoW"),p=e("hOhj"),f=e("5GAg"),h=e("SVse");e("OYjW"),e("flBa"),e.d(n,"a",function(){return g}),e.d(n,"b",function(){return q});var g=t.pb({encapsulation:0,styles:[[""]],data:{}});function B(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(l,n,e){var a=!0;return"click"===n&&(a=!1!==t.Bb(l,1)._selectViaInteraction()&&a),"keydown"===n&&(a=!1!==t.Bb(l,1)._handleKeydown(e)&&a),a},a.c,a.a)),t.qb(1,8568832,[[10,4]],0,u.r,[t.k,t.h,[2,u.l],[2,u.q]],{value:[0,"value"]},null),(l()(),t.Ib(2,0,[" "," "]))],function(l,n){l(n,1,0,n.context.$implicit.id)},function(l,n){l(n,0,0,t.Bb(n,1)._getTabIndex(),t.Bb(n,1).selected,t.Bb(n,1).multiple,t.Bb(n,1).active,t.Bb(n,1).id,t.Bb(n,1)._getAriaSelected(),t.Bb(n,1).disabled.toString(),t.Bb(n,1).disabled),l(n,2,0,n.context.$implicit.reference)})}function v(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,2,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),t.qb(1,16384,[[6,4]],0,r.b,[],null,null),(l()(),t.Ib(2,null,["",""]))],null,function(l,n){var e=n.component;l(n,0,0,t.Bb(n,1).id),l(n,2,0,e.getError())})}function _(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,32,"mat-form-field",[["class","mat-form-field"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],[[null,"submit"],[null,"reset"]],function(l,n,e){var a=!0;return"submit"===n&&(a=!1!==t.Bb(l,1).onSubmit(e)&&a),"reset"===n&&(a=!1!==t.Bb(l,1).onReset()&&a),a},i.b,i.a)),t.qb(1,540672,null,0,o.j,[[8,null],[8,null]],{form:[0,"form"]},null),t.Fb(2048,null,o.c,null,[o.j]),t.qb(3,16384,null,0,o.p,[[4,o.c]],null,null),t.qb(4,7520256,null,9,r.c,[t.k,t.h,[2,u.j],[2,d.b],[2,r.a],s.a,t.y,[2,b.a]],null,null),t.Gb(603979776,1,{_controlNonStatic:0}),t.Gb(335544320,2,{_controlStatic:0}),t.Gb(603979776,3,{_labelChildNonStatic:0}),t.Gb(335544320,4,{_labelChildStatic:0}),t.Gb(603979776,5,{_placeholderChild:0}),t.Gb(603979776,6,{_errorChildren:1}),t.Gb(603979776,7,{_hintChildren:1}),t.Gb(603979776,8,{_prefixChildren:1}),t.Gb(603979776,9,{_suffixChildren:1}),(l()(),t.rb(14,0,null,3,2,"mat-label",[],null,null,null,null,null)),t.qb(15,16384,[[3,4],[4,4]],0,r.g,[],null,null),(l()(),t.Ib(-1,null,["Parameter set"])),(l()(),t.rb(17,0,null,1,13,"mat-select",[["class","mat-select"],["formControlName","parameterSetId"],["id","parameterSetId"],["required",""],["role","listbox"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"selectionChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],function(l,n,e){var a=!0,u=l.component;return"keydown"===n&&(a=!1!==t.Bb(l,24)._handleKeydown(e)&&a),"focus"===n&&(a=!1!==t.Bb(l,24)._onFocus()&&a),"blur"===n&&(a=!1!==t.Bb(l,24)._onBlur()&&a),"selectionChange"===n&&(a=!1!==u.onParameterSetSelect(e)&&a),a},c.b,c.a)),t.Fb(6144,null,u.l,null,[m.c]),t.qb(19,16384,null,0,o.u,[],{required:[0,"required"]},null),t.Fb(1024,null,o.l,function(l){return[l]},[o.u]),t.qb(21,671744,null,0,o.h,[[3,o.c],[6,o.l],[8,null],[8,null],[2,o.y]],{name:[0,"name"]},null),t.Fb(2048,null,o.n,null,[o.h]),t.qb(23,16384,null,0,o.o,[[4,o.n]],null,null),t.qb(24,2080768,null,3,m.c,[p.e,t.h,t.y,u.d,t.k,[2,d.b],[2,o.q],[2,o.j],[2,r.c],[6,o.n],[8,null],m.a,f.j],{required:[0,"required"],id:[1,"id"]},{selectionChange:"selectionChange"}),t.Gb(603979776,10,{options:1}),t.Gb(603979776,11,{optionGroups:1}),t.Gb(603979776,12,{customTrigger:0}),t.Fb(2048,[[1,4],[2,4]],r.d,null,[m.c]),(l()(),t.gb(16777216,null,1,1,null,B)),t.qb(30,278528,null,0,h.j,[t.P,t.M,t.r],{ngForOf:[0,"ngForOf"]},null),(l()(),t.gb(16777216,null,5,1,null,v)),t.qb(32,16384,null,0,h.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,1,0,e.parentForm),l(n,19,0,""),l(n,21,0,"parameterSetId"),l(n,24,0,"","parameterSetId"),l(n,30,0,e.parameterSets),l(n,32,0,e.parentForm.controls.parameterSetId.invalid)},function(l,n){l(n,0,1,[t.Bb(n,3).ngClassUntouched,t.Bb(n,3).ngClassTouched,t.Bb(n,3).ngClassPristine,t.Bb(n,3).ngClassDirty,t.Bb(n,3).ngClassValid,t.Bb(n,3).ngClassInvalid,t.Bb(n,3).ngClassPending,"standard"==t.Bb(n,4).appearance,"fill"==t.Bb(n,4).appearance,"outline"==t.Bb(n,4).appearance,"legacy"==t.Bb(n,4).appearance,t.Bb(n,4)._control.errorState,t.Bb(n,4)._canLabelFloat,t.Bb(n,4)._shouldLabelFloat(),t.Bb(n,4)._hasFloatingLabel(),t.Bb(n,4)._hideControlPlaceholder(),t.Bb(n,4)._control.disabled,t.Bb(n,4)._control.autofilled,t.Bb(n,4)._control.focused,"accent"==t.Bb(n,4).color,"warn"==t.Bb(n,4).color,t.Bb(n,4)._shouldForward("untouched"),t.Bb(n,4)._shouldForward("touched"),t.Bb(n,4)._shouldForward("pristine"),t.Bb(n,4)._shouldForward("dirty"),t.Bb(n,4)._shouldForward("valid"),t.Bb(n,4)._shouldForward("invalid"),t.Bb(n,4)._shouldForward("pending"),!t.Bb(n,4)._animationsEnabled]),l(n,17,1,[t.Bb(n,19).required?"":null,t.Bb(n,23).ngClassUntouched,t.Bb(n,23).ngClassTouched,t.Bb(n,23).ngClassPristine,t.Bb(n,23).ngClassDirty,t.Bb(n,23).ngClassValid,t.Bb(n,23).ngClassInvalid,t.Bb(n,23).ngClassPending,t.Bb(n,24).id,t.Bb(n,24).tabIndex,t.Bb(n,24)._getAriaLabel(),t.Bb(n,24)._getAriaLabelledby(),t.Bb(n,24).required.toString(),t.Bb(n,24).disabled.toString(),t.Bb(n,24).errorState,t.Bb(n,24).panelOpen?t.Bb(n,24)._optionIds:null,t.Bb(n,24).multiple,t.Bb(n,24)._ariaDescribedby||null,t.Bb(n,24)._getAriaActiveDescendant(),t.Bb(n,24).disabled,t.Bb(n,24).errorState,t.Bb(n,24).required,t.Bb(n,24).empty])})}function q(l){return t.Kb(0,[(l()(),t.gb(16777216,null,null,1,null,_)),t.qb(1,16384,null,0,h.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,1,0,e.parameterSets&&e.parameterSets.length>0)},null)}},yaeS:function(l,n,e){"use strict";e.r(n);var t=e("8Y7J");class a{}var u=e("t68o"),r=e("zbXB"),i=e("NcP4"),o=e("pMnS"),d=e("yWMr"),s=e("xYTU"),b=e("Mpcu"),c=e("s6ns"),m=e("bujt"),p=e("Fwaw"),f=e("5GAg"),h=e("omvX"),g=e("SVse"),B=e("flBa"),v=e("xRo1"),_=e("s7LF"),q=e("iSfR"),y=e("dkQB"),F=e("wd/R");class S{constructor(l,n){this.dialogRef=l,this.data=n}}class C{constructor(l,n,e,a){this.fb=l,this.parameterService=n,this.validatorService=e,this.dialog=a,this.complete=new t.m,this.inputFileType=5,this.isUploading=!1,this.parameterSets=[]}ngOnInit(){this.parameterUploadForm=this.fb.group({reference:[null,_.v.compose([_.v.required,_.v.minLength(3),_.v.maxLength(45)]),this.validatorService.referenceValidator(this.inputFileType)]})}getReferenceError(){return this.parameterUploadForm.controls.reference.hasError("required")?"You must enter a reference":this.parameterUploadForm.controls.reference.hasError("minlength")?"The reference is too short":this.parameterUploadForm.controls.reference.hasError("maxlength")?"The reference is too long":this.parameterUploadForm.controls.reference.hasError("referenceExists")?"A parameter set with this reference already exists":""}onSubmit(){this.upload(this.parset,this.filename)}onFileContentsChange(l){this.complete.emit(!1),this.parset=Object(v.xml2js)(l.contents,y.a),this.filename=l.filename}upload(l,n){this.isUploading=!0;const e=this.parameterUploadForm.value.reference;this.parameterService.upload(l,n,e).subscribe(n=>{"File already exists"===n?(this.complete.emit(!1),this.openDialog(!1)):(this.complete.emit(!0),this.openDialog(),this.publishMeta(+n,l,e))})}publishMeta(l,n,e){let t=n.ParameterSet.ParameterContainer.ParameterGroup[0].ParameterContainer.Parameter[1].currentValue._text;const a=n.ParameterSet.ParameterContainer.ParameterGroup[0].ParameterContainer.Parameter[0].currentValue._text,u={id:l,reference:e,startDate:(t=F(t,"DD/MM/YYYY")).format("YYYY-MM-DD"),timesteps:a,modelVersion:null,lastEditDate:null,modelVersionId:null};this.parameterService.emitNewParameterSetMeta(u)}openDialog(l=!0){this.dialog.open(S,{width:"350px",data:{success:l}}).afterClosed().subscribe(l=>{this.resetForm()})}resetForm(){this.parameterUploadForm.markAsPristine(),this.parameterUploadForm.reset(),this.isUploading=!1}}var I=e("HsOI"),w=e("lzlj"),k=e("igqZ"),x=e("dJrM"),T=e("Xd0L"),U=e("IP0z"),D=e("/HVE"),P=e("ZwOa"),z=e("oapL"),G=e("lGhA"),E=e("R3ZY"),M=t.pb({encapsulation:2,styles:[],data:{}});function R(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,13,null,null,null,null,null,null,null)),(l()(),t.rb(1,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),t.qb(2,81920,null,0,c.m,[[2,c.l],t.k,c.e],null,null),(l()(),t.Ib(-1,null,["Upload complete"])),(l()(),t.rb(4,0,null,null,3,"div",[["class","mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),t.qb(5,16384,null,0,c.j,[],null,null),(l()(),t.rb(6,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["The parameter file was successfully uploaded and imported."])),(l()(),t.rb(8,0,null,null,5,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),t.qb(9,16384,null,0,c.f,[],null,null),(l()(),t.rb(10,0,null,null,3,"button",[["mat-raised-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0]],[[null,"click"]],function(l,n,e){var a=!0;return"click"===n&&(a=!1!==t.Bb(l,12).dialogRef.close(t.Bb(l,12).dialogResult)&&a),a},m.d,m.b)),t.qb(11,180224,null,0,p.b,[t.k,f.h,[2,h.a]],null,null),t.qb(12,606208,null,0,c.g,[[2,c.l],t.k,c.e],{dialogResult:[0,"dialogResult"]},null),(l()(),t.Ib(-1,0,["Ok"]))],function(l,n){l(n,2,0),l(n,12,0,!0)},function(l,n){l(n,1,0,t.Bb(n,2).id),l(n,10,0,t.Bb(n,11).disabled||null,"NoopAnimations"===t.Bb(n,11)._animationMode,t.Bb(n,12).ariaLabel||null)})}function j(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),t.qb(1,81920,null,0,c.m,[[2,c.l],t.k,c.e],null,null),(l()(),t.Ib(-1,null,["File already exists"])),(l()(),t.rb(3,0,null,null,3,"div",[["class","mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),t.qb(4,16384,null,0,c.j,[],null,null),(l()(),t.rb(5,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["The parameter file already exists in the database. It has NOT been imported."])),(l()(),t.rb(7,0,null,null,5,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),t.qb(8,16384,null,0,c.f,[],null,null),(l()(),t.rb(9,0,null,null,3,"button",[["mat-raised-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0]],[[null,"click"]],function(l,n,e){var a=!0;return"click"===n&&(a=!1!==t.Bb(l,11).dialogRef.close(t.Bb(l,11).dialogResult)&&a),a},m.d,m.b)),t.qb(10,180224,null,0,p.b,[t.k,f.h,[2,h.a]],null,null),t.qb(11,606208,null,0,c.g,[[2,c.l],t.k,c.e],{dialogResult:[0,"dialogResult"]},null),(l()(),t.Ib(-1,0,["Ok"]))],function(l,n){l(n,1,0),l(n,11,0,!0)},function(l,n){l(n,0,0,t.Bb(n,1).id),l(n,9,0,t.Bb(n,10).disabled||null,"NoopAnimations"===t.Bb(n,10)._animationMode,t.Bb(n,11).ariaLabel||null)})}function O(l){return t.Kb(0,[(l()(),t.gb(16777216,null,null,1,null,R)),t.qb(1,16384,null,0,g.k,[t.P,t.M],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),t.gb(0,[["exists",2]],null,0,null,j))],function(l,n){l(n,1,0,n.component.data.success,t.Bb(n,2))},null)}function L(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,1,"slu-dialog-parameter-file-uploaded",[],null,null,null,O,M)),t.qb(1,49152,null,0,S,[c.l,c.a],null,null)],null,null)}var N=t.nb("slu-dialog-parameter-file-uploaded",S,L,{},{},[]),Y=t.pb({encapsulation:0,styles:[[""]],data:{}});function A(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,2,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),t.qb(1,16384,[[6,4]],0,I.b,[],null,null),(l()(),t.Ib(2,null,["",""]))],null,function(l,n){var e=n.component;l(n,0,0,t.Bb(n,1).id),l(n,2,0,e.getReferenceError())})}function K(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,52,"mat-card",[["class","mat-card"]],null,null,null,w.d,w.a)),t.qb(1,49152,null,0,k.a,[],null,null),(l()(),t.rb(2,0,null,0,4,"mat-card-header",[["class","mat-card-header"]],null,null,null,w.c,w.b)),t.qb(3,49152,null,0,k.c,[],null,null),(l()(),t.rb(4,0,null,1,2,"mat-card-title",[["class","mat-card-title"]],null,null,null,null,null)),t.qb(5,16384,null,0,k.f,[],null,null),(l()(),t.Ib(-1,null,["XML parameter file"])),(l()(),t.rb(7,0,null,0,45,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),t.qb(8,16384,null,0,k.b,[],null,null),(l()(),t.rb(9,0,null,null,43,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,e){var a=!0,u=l.component;return"submit"===n&&(a=!1!==t.Bb(l,11).onSubmit(e)&&a),"reset"===n&&(a=!1!==t.Bb(l,11).onReset()&&a),"ngSubmit"===n&&(a=!1!==u.onSubmit()&&a),a},null,null)),t.qb(10,16384,null,0,_.z,[],null,null),t.qb(11,540672,null,0,_.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t.Fb(2048,null,_.c,null,[_.j]),t.qb(13,16384,null,0,_.p,[[4,_.c]],null,null),(l()(),t.rb(14,0,null,null,38,"div",[["class","flex-column space"]],null,null,null,null,null)),(l()(),t.rb(15,0,null,null,31,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,x.b,x.a)),t.qb(16,7520256,null,9,I.c,[t.k,t.h,[2,T.j],[2,U.b],[2,I.a],D.a,t.y,[2,h.a]],null,null),t.Gb(603979776,1,{_controlNonStatic:0}),t.Gb(335544320,2,{_controlStatic:0}),t.Gb(603979776,3,{_labelChildNonStatic:0}),t.Gb(335544320,4,{_labelChildStatic:0}),t.Gb(603979776,5,{_placeholderChild:0}),t.Gb(603979776,6,{_errorChildren:1}),t.Gb(603979776,7,{_hintChildren:1}),t.Gb(603979776,8,{_prefixChildren:1}),t.Gb(603979776,9,{_suffixChildren:1}),(l()(),t.rb(26,0,null,3,2,"mat-label",[],null,null,null,null,null)),t.qb(27,16384,[[3,4],[4,4]],0,I.g,[],null,null),(l()(),t.Ib(-1,null,["Reference"])),(l()(),t.rb(29,0,[["referenceText",1]],1,9,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","reference"],["id","reference"],["matInput",""],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(l,n,e){var a=!0;return"input"===n&&(a=!1!==t.Bb(l,30)._handleInput(e.target.value)&&a),"blur"===n&&(a=!1!==t.Bb(l,30).onTouched()&&a),"compositionstart"===n&&(a=!1!==t.Bb(l,30)._compositionStart()&&a),"compositionend"===n&&(a=!1!==t.Bb(l,30)._compositionEnd(e.target.value)&&a),"blur"===n&&(a=!1!==t.Bb(l,37)._focusChanged(!1)&&a),"focus"===n&&(a=!1!==t.Bb(l,37)._focusChanged(!0)&&a),"input"===n&&(a=!1!==t.Bb(l,37)._onInput()&&a),a},null,null)),t.qb(30,16384,null,0,_.d,[t.E,t.k,[2,_.a]],null,null),t.qb(31,16384,null,0,_.u,[],{required:[0,"required"]},null),t.Fb(1024,null,_.l,function(l){return[l]},[_.u]),t.Fb(1024,null,_.m,function(l){return[l]},[_.d]),t.qb(34,671744,null,0,_.h,[[3,_.c],[6,_.l],[8,null],[6,_.m],[2,_.y]],{name:[0,"name"]},null),t.Fb(2048,null,_.n,null,[_.h]),t.qb(36,16384,null,0,_.o,[[4,_.n]],null,null),t.qb(37,999424,null,0,P.b,[t.k,D.a,[6,_.n],[2,_.q],[2,_.j],T.d,[8,null],z.a,t.y],{id:[0,"id"],required:[1,"required"],type:[2,"type"]},null),t.Fb(2048,[[1,4],[2,4]],I.d,null,[P.b]),(l()(),t.rb(39,0,null,6,2,"mat-hint",[["align","start"],["class","mat-hint"]],[[2,"mat-right",null],[1,"id",0],[1,"align",0]],null,null,null,null)),t.qb(40,16384,[[7,4]],0,I.f,[],{align:[0,"align"]},null),(l()(),t.Ib(-1,null,["To help you identify this parameter set"])),(l()(),t.rb(42,0,null,7,2,"mat-hint",[["align","end"],["class","mat-hint"]],[[2,"mat-right",null],[1,"id",0],[1,"align",0]],null,null,null,null)),t.qb(43,16384,[[7,4]],0,I.f,[],{align:[0,"align"]},null),(l()(),t.Ib(44,null,["","/45"])),(l()(),t.gb(16777216,null,5,1,null,A)),t.qb(46,16384,null,0,g.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.rb(47,0,null,null,1,"slu-file-upload",[],null,[[null,"contents"]],function(l,n,e){var t=!0;return"contents"===n&&(t=!1!==l.component.onFileContentsChange(e)&&t),t},G.b,G.a)),t.qb(48,114688,null,0,E.a,[t.D],{parentForm:[0,"parentForm"],extension:[1,"extension"],allowMultiple:[2,"allowMultiple"],errorMessage:[3,"errorMessage"]},{contents:"contents"}),(l()(),t.rb(49,0,null,null,3,"div",[["class","flex-row end"]],null,null,null,null,null)),(l()(),t.rb(50,0,null,null,2,"button",[["color","primary"],["mat-raised-button",""],["type","submit"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,m.d,m.b)),t.qb(51,180224,null,0,p.b,[t.k,f.h,[2,h.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(l()(),t.Ib(-1,0,[" Upload "]))],function(l,n){var e=n.component;l(n,11,0,e.parameterUploadForm),l(n,31,0,""),l(n,34,0,"reference"),l(n,37,0,"reference","","text"),l(n,40,0,"start"),l(n,43,0,"end"),l(n,46,0,e.parameterUploadForm.controls.reference.invalid),l(n,48,0,e.parameterUploadForm,".xml",!0,"You must select a parameter file to upload"),l(n,51,0,e.parameterUploadForm.invalid||e.parameterUploadForm.pending||e.isUploading,"primary")},function(l,n){l(n,9,0,t.Bb(n,13).ngClassUntouched,t.Bb(n,13).ngClassTouched,t.Bb(n,13).ngClassPristine,t.Bb(n,13).ngClassDirty,t.Bb(n,13).ngClassValid,t.Bb(n,13).ngClassInvalid,t.Bb(n,13).ngClassPending),l(n,15,1,["standard"==t.Bb(n,16).appearance,"fill"==t.Bb(n,16).appearance,"outline"==t.Bb(n,16).appearance,"legacy"==t.Bb(n,16).appearance,t.Bb(n,16)._control.errorState,t.Bb(n,16)._canLabelFloat,t.Bb(n,16)._shouldLabelFloat(),t.Bb(n,16)._hasFloatingLabel(),t.Bb(n,16)._hideControlPlaceholder(),t.Bb(n,16)._control.disabled,t.Bb(n,16)._control.autofilled,t.Bb(n,16)._control.focused,"accent"==t.Bb(n,16).color,"warn"==t.Bb(n,16).color,t.Bb(n,16)._shouldForward("untouched"),t.Bb(n,16)._shouldForward("touched"),t.Bb(n,16)._shouldForward("pristine"),t.Bb(n,16)._shouldForward("dirty"),t.Bb(n,16)._shouldForward("valid"),t.Bb(n,16)._shouldForward("invalid"),t.Bb(n,16)._shouldForward("pending"),!t.Bb(n,16)._animationsEnabled]),l(n,29,1,[t.Bb(n,31).required?"":null,t.Bb(n,36).ngClassUntouched,t.Bb(n,36).ngClassTouched,t.Bb(n,36).ngClassPristine,t.Bb(n,36).ngClassDirty,t.Bb(n,36).ngClassValid,t.Bb(n,36).ngClassInvalid,t.Bb(n,36).ngClassPending,t.Bb(n,37)._isServer,t.Bb(n,37).id,t.Bb(n,37).placeholder,t.Bb(n,37).disabled,t.Bb(n,37).required,t.Bb(n,37).readonly&&!t.Bb(n,37)._isNativeSelect||null,t.Bb(n,37)._ariaDescribedby||null,t.Bb(n,37).errorState,t.Bb(n,37).required.toString()]),l(n,39,0,"end"==t.Bb(n,40).align,t.Bb(n,40).id,null),l(n,42,0,"end"==t.Bb(n,43).align,t.Bb(n,43).id,null),l(n,44,0,(null==t.Bb(n,29).value?null:t.Bb(n,29).value.length)||0),l(n,50,0,t.Bb(n,51).disabled||null,"NoopAnimations"===t.Bb(n,51)._animationMode)})}var V=e("6Flb"),J=e("chYJ");class H{constructor(l,n){this.dialogRef=l,this.data=n}}class W{constructor(l,n,e,a,u){this.fb=l,this.validatorService=n,this.inputFileService=e,this.parameterService=a,this.dialog=u,this.complete=new t.m,this.fileTypeExtension=".dat",this.fileTypeId=V.f.HYDROLOGY,this.isUploading=!1}ngOnInit(){this.inputUploadForm=this.fb.group({reference:[null,_.v.compose([_.v.required,_.v.minLength(3),_.v.maxLength(45)]),this.validatorService.referenceValidator(this.fileTypeId)],startDate:[null,_.v.compose([_.v.required])]})}getReferenceError(){return this.inputUploadForm.controls.reference.hasError("required")?"You must enter a reference":this.inputUploadForm.controls.reference.hasError("minlength")?"The reference is too short":this.inputUploadForm.controls.reference.hasError("maxlength")?"The reference is too long":this.inputUploadForm.controls.reference.hasError("referenceExists")?"A file with this reference already exists":""}getStartDateError(){return this.inputUploadForm.controls.startDate.hasError("required")?"You must enter a start date":""}onSubmit(){this.upload(this.filename)}onFileContentsChange(l){switch(this.complete.emit(!1),this.filename=l.filename,this.fileTypeId){case V.f.HYDROLOGY:this.inputData=new V.b;break;case V.f.OBSERVED:this.inputData=new V.d(this.observedDataTags);break;case V.f.EFFLUENT:this.inputData=new V.c(this.parameterSet.timesteps);break;case V.f.ABSTRACTION:this.inputData=new V.a(this.parameterSet.timesteps);break;case V.f.PET:this.inputData=new V.e(this.parameterSet.timesteps,null,this.extractIndexes("Landscape units"))}const n=this.indexes.reduce((l,n)=>l.concat(Object.values(n)),[]).reduce((l,n)=>l.concat(n),[]).map(l=>l.reference),e=l.contents.split(/\r?\n/).filter(l=>!!l.trim());this.inputData.parseTextFileContents(e,n)}onFileTypeSelect(l){this.fileTypeExtension=l.legacy_extension,this.fileTypeId=+l.id,this.inputData=null,this.filename=null,this.inputUploadForm.controls.filename.reset(),this.fileTypeId===V.f.OBSERVED&&this.getObservedDataTags()}getObservedDataTags(){this.inputFileService.getObservedDataTags().subscribe(l=>{this.observedDataTags=l})}onParameterSetSelect(l){this.parameterSet=l,this.parameterService.getParameterIndexes(+this.parameterSet.id).subscribe(l=>{this.indexes=JSON.parse(l[0].result)});const n=F(l.startDate,"YYYY-MM-DD");this.inputUploadForm.controls.startDate.setValue(n)}extractIndexes(l){return this.indexes.filter(n=>Object.keys(n)[0]===l)[0][l].map(l=>l.reference)}upload(l){this.isUploading=!0;const n=this.inputUploadForm.value.reference,e=this.inputUploadForm.value.startDate.format("YYYY-MM-DD");this.inputFileService.upload(this.fileTypeId,this.inputData,l,n,e).subscribe(l=>{"File already exists"===l?(this.complete.emit(!1),this.openDialog(!1)):(this.complete.emit(!0),this.openDialog())})}openDialog(l=!0){this.dialog.open(H,{width:"350px",data:{success:l}}).afterClosed().subscribe(l=>{this.resetForm()})}resetForm(){this.inputUploadForm.markAsPristine(),this.inputUploadForm.reset(),this.isUploading=!1}}var X=e("MlvX"),Z=e("Azqq"),$=e("JjoW"),Q=e("hOhj");class ll{constructor(l){this.inputFileService=l,this.type=new t.m,this.inputTypes=null,this.selectedType=null}ngOnInit(){this.getOptions()}getOptions(){this.inputFileService.getInputFileTypes().subscribe(l=>{this.inputTypes=l,this.selectedType=this.inputTypes[0]})}onTypeSelect(l){const n=+l.value;this.selectedType=this.inputTypes.find(l=>+l.id===n),this.type.emit(this.selectedType)}}var nl=t.pb({encapsulation:0,styles:[[""]],data:{}});function el(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(l,n,e){var a=!0;return"click"===n&&(a=!1!==t.Bb(l,1)._selectViaInteraction()&&a),"keydown"===n&&(a=!1!==t.Bb(l,1)._handleKeydown(e)&&a),a},X.c,X.a)),t.qb(1,8568832,[[10,4]],0,T.r,[t.k,t.h,[2,T.l],[2,T.q]],{value:[0,"value"]},null),(l()(),t.Ib(2,0,[" "," "]))],function(l,n){l(n,1,0,n.context.$implicit.id)},function(l,n){l(n,0,0,t.Bb(n,1)._getTabIndex(),t.Bb(n,1).selected,t.Bb(n,1).multiple,t.Bb(n,1).active,t.Bb(n,1).id,t.Bb(n,1)._getAriaSelected(),t.Bb(n,1).disabled.toString(),t.Bb(n,1).disabled),l(n,2,0,n.context.$implicit.name)})}function tl(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,19,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,x.b,x.a)),t.qb(1,7520256,null,9,I.c,[t.k,t.h,[2,T.j],[2,U.b],[2,I.a],D.a,t.y,[2,h.a]],null,null),t.Gb(603979776,1,{_controlNonStatic:0}),t.Gb(335544320,2,{_controlStatic:0}),t.Gb(603979776,3,{_labelChildNonStatic:0}),t.Gb(335544320,4,{_labelChildStatic:0}),t.Gb(603979776,5,{_placeholderChild:0}),t.Gb(603979776,6,{_errorChildren:1}),t.Gb(603979776,7,{_hintChildren:1}),t.Gb(603979776,8,{_prefixChildren:1}),t.Gb(603979776,9,{_suffixChildren:1}),(l()(),t.rb(11,0,null,1,8,"mat-select",[["class","mat-select"],["placeholder","Input type"],["role","listbox"]],[[1,"id",0],[1,"tabindex",0],[1,"aria-label",0],[1,"aria-labelledby",0],[1,"aria-required",0],[1,"aria-disabled",0],[1,"aria-invalid",0],[1,"aria-owns",0],[1,"aria-multiselectable",0],[1,"aria-describedby",0],[1,"aria-activedescendant",0],[2,"mat-select-disabled",null],[2,"mat-select-invalid",null],[2,"mat-select-required",null],[2,"mat-select-empty",null]],[[null,"selectionChange"],[null,"keydown"],[null,"focus"],[null,"blur"]],function(l,n,e){var a=!0,u=l.component;return"keydown"===n&&(a=!1!==t.Bb(l,13)._handleKeydown(e)&&a),"focus"===n&&(a=!1!==t.Bb(l,13)._onFocus()&&a),"blur"===n&&(a=!1!==t.Bb(l,13)._onBlur()&&a),"selectionChange"===n&&(a=!1!==u.onTypeSelect(e)&&a),a},Z.b,Z.a)),t.Fb(6144,null,T.l,null,[$.c]),t.qb(13,2080768,null,3,$.c,[Q.e,t.h,t.y,T.d,t.k,[2,U.b],[2,_.q],[2,_.j],[2,I.c],[8,null],[8,null],$.a,f.j],{placeholder:[0,"placeholder"],value:[1,"value"]},{selectionChange:"selectionChange"}),t.Gb(603979776,10,{options:1}),t.Gb(603979776,11,{optionGroups:1}),t.Gb(603979776,12,{customTrigger:0}),t.Fb(2048,[[1,4],[2,4]],I.d,null,[$.c]),(l()(),t.gb(16777216,null,1,1,null,el)),t.qb(19,278528,null,0,g.j,[t.P,t.M,t.r],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var e=n.component;l(n,13,0,"Input type",null==e.selectedType?null:e.selectedType.id),l(n,19,0,e.inputTypes)},function(l,n){l(n,0,1,["standard"==t.Bb(n,1).appearance,"fill"==t.Bb(n,1).appearance,"outline"==t.Bb(n,1).appearance,"legacy"==t.Bb(n,1).appearance,t.Bb(n,1)._control.errorState,t.Bb(n,1)._canLabelFloat,t.Bb(n,1)._shouldLabelFloat(),t.Bb(n,1)._hasFloatingLabel(),t.Bb(n,1)._hideControlPlaceholder(),t.Bb(n,1)._control.disabled,t.Bb(n,1)._control.autofilled,t.Bb(n,1)._control.focused,"accent"==t.Bb(n,1).color,"warn"==t.Bb(n,1).color,t.Bb(n,1)._shouldForward("untouched"),t.Bb(n,1)._shouldForward("touched"),t.Bb(n,1)._shouldForward("pristine"),t.Bb(n,1)._shouldForward("dirty"),t.Bb(n,1)._shouldForward("valid"),t.Bb(n,1)._shouldForward("invalid"),t.Bb(n,1)._shouldForward("pending"),!t.Bb(n,1)._animationsEnabled]),l(n,11,1,[t.Bb(n,13).id,t.Bb(n,13).tabIndex,t.Bb(n,13)._getAriaLabel(),t.Bb(n,13)._getAriaLabelledby(),t.Bb(n,13).required.toString(),t.Bb(n,13).disabled.toString(),t.Bb(n,13).errorState,t.Bb(n,13).panelOpen?t.Bb(n,13)._optionIds:null,t.Bb(n,13).multiple,t.Bb(n,13)._ariaDescribedby||null,t.Bb(n,13)._getAriaActiveDescendant(),t.Bb(n,13).disabled,t.Bb(n,13).errorState,t.Bb(n,13).required,t.Bb(n,13).empty])})}function al(l){return t.Kb(0,[(l()(),t.gb(16777216,null,null,1,null,tl)),t.qb(1,16384,null,0,g.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,1,0,e.inputTypes&&e.inputTypes.length>0)},null)}var ul=e("ebK6"),rl=e("OYjW"),il=e("821u"),ol=e("QQfA"),dl=t.pb({encapsulation:2,styles:[],data:{}});function sl(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,13,null,null,null,null,null,null,null)),(l()(),t.rb(1,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),t.qb(2,81920,null,0,c.m,[[2,c.l],t.k,c.e],null,null),(l()(),t.Ib(-1,null,["Upload complete"])),(l()(),t.rb(4,0,null,null,3,"div",[["class","mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),t.qb(5,16384,null,0,c.j,[],null,null),(l()(),t.rb(6,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["The input file was successfully uploaded and imported."])),(l()(),t.rb(8,0,null,null,5,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),t.qb(9,16384,null,0,c.f,[],null,null),(l()(),t.rb(10,0,null,null,3,"button",[["mat-raised-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0]],[[null,"click"]],function(l,n,e){var a=!0;return"click"===n&&(a=!1!==t.Bb(l,12).dialogRef.close(t.Bb(l,12).dialogResult)&&a),a},m.d,m.b)),t.qb(11,180224,null,0,p.b,[t.k,f.h,[2,h.a]],null,null),t.qb(12,606208,null,0,c.g,[[2,c.l],t.k,c.e],{dialogResult:[0,"dialogResult"]},null),(l()(),t.Ib(-1,0,["Ok"]))],function(l,n){l(n,2,0),l(n,12,0,!0)},function(l,n){l(n,1,0,t.Bb(n,2).id),l(n,10,0,t.Bb(n,11).disabled||null,"NoopAnimations"===t.Bb(n,11)._animationMode,t.Bb(n,12).ariaLabel||null)})}function bl(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),t.qb(1,81920,null,0,c.m,[[2,c.l],t.k,c.e],null,null),(l()(),t.Ib(-1,null,["File already exists"])),(l()(),t.rb(3,0,null,null,3,"div",[["class","mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),t.qb(4,16384,null,0,c.j,[],null,null),(l()(),t.rb(5,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["The input file already exists in the database. It has NOT been imported."])),(l()(),t.rb(7,0,null,null,5,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),t.qb(8,16384,null,0,c.f,[],null,null),(l()(),t.rb(9,0,null,null,3,"button",[["mat-raised-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0]],[[null,"click"]],function(l,n,e){var a=!0;return"click"===n&&(a=!1!==t.Bb(l,11).dialogRef.close(t.Bb(l,11).dialogResult)&&a),a},m.d,m.b)),t.qb(10,180224,null,0,p.b,[t.k,f.h,[2,h.a]],null,null),t.qb(11,606208,null,0,c.g,[[2,c.l],t.k,c.e],{dialogResult:[0,"dialogResult"]},null),(l()(),t.Ib(-1,0,["Ok"]))],function(l,n){l(n,1,0),l(n,11,0,!0)},function(l,n){l(n,0,0,t.Bb(n,1).id),l(n,9,0,t.Bb(n,10).disabled||null,"NoopAnimations"===t.Bb(n,10)._animationMode,t.Bb(n,11).ariaLabel||null)})}function cl(l){return t.Kb(0,[(l()(),t.gb(16777216,null,null,1,null,sl)),t.qb(1,16384,null,0,g.k,[t.P,t.M],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),t.gb(0,[["exists",2]],null,0,null,bl))],function(l,n){l(n,1,0,n.component.data.success,t.Bb(n,2))},null)}function ml(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,1,"slu-dialog-input-file-uploaded",[],null,null,null,cl,dl)),t.qb(1,49152,null,0,H,[c.l,c.a],null,null)],null,null)}var pl=t.nb("slu-dialog-input-file-uploaded",H,ml,{},{},[]),fl=t.pb({encapsulation:2,styles:[],data:{}});function hl(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,2,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),t.qb(1,16384,[[6,4]],0,I.b,[],null,null),(l()(),t.Ib(2,null,["",""]))],null,function(l,n){var e=n.component;l(n,0,0,t.Bb(n,1).id),l(n,2,0,e.getReferenceError())})}function gl(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,2,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),t.qb(1,16384,[[15,4]],0,I.b,[],null,null),(l()(),t.Ib(2,null,["",""]))],null,function(l,n){var e=n.component;l(n,0,0,t.Bb(n,1).id),l(n,2,0,e.getStartDateError())})}function Bl(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,94,"mat-card",[["class","mat-card"]],null,null,null,w.d,w.a)),t.qb(1,49152,null,0,k.a,[],null,null),(l()(),t.rb(2,0,null,0,4,"mat-card-header",[["class","mat-card-header"]],null,null,null,w.c,w.b)),t.qb(3,49152,null,0,k.c,[],null,null),(l()(),t.rb(4,0,null,1,2,"mat-card-title",[["class","mat-card-title"]],null,null,null,null,null)),t.qb(5,16384,null,0,k.f,[],null,null),(l()(),t.Ib(-1,null,["Time series input file"])),(l()(),t.rb(7,0,null,0,87,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),t.qb(8,16384,null,0,k.b,[],null,null),(l()(),t.rb(9,0,null,null,85,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,e){var a=!0,u=l.component;return"submit"===n&&(a=!1!==t.Bb(l,11).onSubmit(e)&&a),"reset"===n&&(a=!1!==t.Bb(l,11).onReset()&&a),"ngSubmit"===n&&(a=!1!==u.onSubmit()&&a),a},null,null)),t.qb(10,16384,null,0,_.z,[],null,null),t.qb(11,540672,null,0,_.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t.Fb(2048,null,_.c,null,[_.j]),t.qb(13,16384,null,0,_.p,[[4,_.c]],null,null),(l()(),t.rb(14,0,null,null,80,"div",[["class","flex-column space"]],null,null,null,null,null)),(l()(),t.rb(15,0,null,null,2,"div",[["class","flex-row end"]],null,null,null,null,null)),(l()(),t.rb(16,0,null,null,1,"slu-input-type-select",[],null,[[null,"type"]],function(l,n,e){var t=!0;return"type"===n&&(t=!1!==l.component.onFileTypeSelect(e)&&t),t},al,nl)),t.qb(17,114688,null,0,ll,[J.a],null,{type:"type"}),(l()(),t.rb(18,0,null,null,1,"slu-parameter-set-select",[],null,[[null,"parameterSet"]],function(l,n,e){var t=!0;return"parameterSet"===n&&(t=!1!==l.component.onParameterSetSelect(e)&&t),t},ul.b,ul.a)),t.qb(19,638976,null,0,rl.a,[B.a],{parentForm:[0,"parentForm"]},{parameterSet:"parameterSet"}),(l()(),t.rb(20,0,null,null,31,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,x.b,x.a)),t.qb(21,7520256,null,9,I.c,[t.k,t.h,[2,T.j],[2,U.b],[2,I.a],D.a,t.y,[2,h.a]],null,null),t.Gb(603979776,1,{_controlNonStatic:0}),t.Gb(335544320,2,{_controlStatic:0}),t.Gb(603979776,3,{_labelChildNonStatic:0}),t.Gb(335544320,4,{_labelChildStatic:0}),t.Gb(603979776,5,{_placeholderChild:0}),t.Gb(603979776,6,{_errorChildren:1}),t.Gb(603979776,7,{_hintChildren:1}),t.Gb(603979776,8,{_prefixChildren:1}),t.Gb(603979776,9,{_suffixChildren:1}),(l()(),t.rb(31,0,null,3,2,"mat-label",[],null,null,null,null,null)),t.qb(32,16384,[[3,4],[4,4]],0,I.g,[],null,null),(l()(),t.Ib(-1,null,["Reference"])),(l()(),t.rb(34,0,[["referenceText",1]],1,9,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","reference"],["id","reference"],["matInput",""],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(l,n,e){var a=!0;return"input"===n&&(a=!1!==t.Bb(l,35)._handleInput(e.target.value)&&a),"blur"===n&&(a=!1!==t.Bb(l,35).onTouched()&&a),"compositionstart"===n&&(a=!1!==t.Bb(l,35)._compositionStart()&&a),"compositionend"===n&&(a=!1!==t.Bb(l,35)._compositionEnd(e.target.value)&&a),"blur"===n&&(a=!1!==t.Bb(l,42)._focusChanged(!1)&&a),"focus"===n&&(a=!1!==t.Bb(l,42)._focusChanged(!0)&&a),"input"===n&&(a=!1!==t.Bb(l,42)._onInput()&&a),a},null,null)),t.qb(35,16384,null,0,_.d,[t.E,t.k,[2,_.a]],null,null),t.qb(36,16384,null,0,_.u,[],{required:[0,"required"]},null),t.Fb(1024,null,_.l,function(l){return[l]},[_.u]),t.Fb(1024,null,_.m,function(l){return[l]},[_.d]),t.qb(39,671744,null,0,_.h,[[3,_.c],[6,_.l],[8,null],[6,_.m],[2,_.y]],{name:[0,"name"]},null),t.Fb(2048,null,_.n,null,[_.h]),t.qb(41,16384,null,0,_.o,[[4,_.n]],null,null),t.qb(42,999424,null,0,P.b,[t.k,D.a,[6,_.n],[2,_.q],[2,_.j],T.d,[8,null],z.a,t.y],{id:[0,"id"],required:[1,"required"],type:[2,"type"]},null),t.Fb(2048,[[1,4],[2,4]],I.d,null,[P.b]),(l()(),t.rb(44,0,null,6,2,"mat-hint",[["align","start"],["class","mat-hint"]],[[2,"mat-right",null],[1,"id",0],[1,"align",0]],null,null,null,null)),t.qb(45,16384,[[7,4]],0,I.f,[],{align:[0,"align"]},null),(l()(),t.Ib(-1,null,["To help you identify this input file"])),(l()(),t.rb(47,0,null,7,2,"mat-hint",[["align","end"],["class","mat-hint"]],[[2,"mat-right",null],[1,"id",0],[1,"align",0]],null,null,null,null)),t.qb(48,16384,[[7,4]],0,I.f,[],{align:[0,"align"]},null),(l()(),t.Ib(49,null,["","/45"])),(l()(),t.gb(16777216,null,5,1,null,hl)),t.qb(51,16384,null,0,g.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.rb(52,0,null,null,36,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,x.b,x.a)),t.qb(53,7520256,null,9,I.c,[t.k,t.h,[2,T.j],[2,U.b],[2,I.a],D.a,t.y,[2,h.a]],null,null),t.Gb(603979776,10,{_controlNonStatic:0}),t.Gb(335544320,11,{_controlStatic:0}),t.Gb(603979776,12,{_labelChildNonStatic:0}),t.Gb(335544320,13,{_labelChildStatic:0}),t.Gb(603979776,14,{_placeholderChild:0}),t.Gb(603979776,15,{_errorChildren:1}),t.Gb(603979776,16,{_hintChildren:1}),t.Gb(603979776,17,{_prefixChildren:1}),t.Gb(603979776,18,{_suffixChildren:1}),(l()(),t.rb(63,0,null,3,2,"mat-label",[],null,null,null,null,null)),t.qb(64,16384,[[12,4],[13,4]],0,I.g,[],null,null),(l()(),t.Ib(-1,null,["Start date"])),(l()(),t.rb(66,0,null,1,11,"input",[["aria-haspopup","dialog"],["class","mat-input-element mat-form-field-autofill-control"],["formControlName","startDate"],["id","startDate"],["matInput",""],["required",""]],[[1,"required",0],[1,"aria-owns",0],[1,"min",0],[1,"max",0],[8,"disabled",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"],[null,"keydown"],[null,"focus"]],function(l,n,e){var a=!0;return"input"===n&&(a=!1!==t.Bb(l,67)._handleInput(e.target.value)&&a),"blur"===n&&(a=!1!==t.Bb(l,67).onTouched()&&a),"compositionstart"===n&&(a=!1!==t.Bb(l,67)._compositionStart()&&a),"compositionend"===n&&(a=!1!==t.Bb(l,67)._compositionEnd(e.target.value)&&a),"input"===n&&(a=!1!==t.Bb(l,69)._onInput(e.target.value)&&a),"change"===n&&(a=!1!==t.Bb(l,69)._onChange()&&a),"blur"===n&&(a=!1!==t.Bb(l,69)._onBlur()&&a),"keydown"===n&&(a=!1!==t.Bb(l,69)._onKeydown(e)&&a),"blur"===n&&(a=!1!==t.Bb(l,76)._focusChanged(!1)&&a),"focus"===n&&(a=!1!==t.Bb(l,76)._focusChanged(!0)&&a),"input"===n&&(a=!1!==t.Bb(l,76)._onInput()&&a),a},null,null)),t.qb(67,16384,null,0,_.d,[t.E,t.k,[2,_.a]],null,null),t.qb(68,16384,null,0,_.u,[],{required:[0,"required"]},null),t.qb(69,147456,null,0,il.h,[t.k,[2,T.c],[2,T.g],[2,I.c]],{matDatepicker:[0,"matDatepicker"]},null),t.Fb(1024,null,_.l,function(l,n){return[l,n]},[_.u,il.h]),t.Fb(1024,null,_.m,function(l,n){return[l,n]},[_.d,il.h]),t.qb(72,671744,null,0,_.h,[[3,_.c],[6,_.l],[8,null],[6,_.m],[2,_.y]],{name:[0,"name"]},null),t.Fb(2048,null,_.n,null,[_.h]),t.qb(74,16384,null,0,_.o,[[4,_.n]],null,null),t.Fb(2048,null,P.a,null,[il.h]),t.qb(76,999424,null,0,P.b,[t.k,D.a,[6,_.n],[2,_.q],[2,_.j],T.d,[6,P.a],z.a,t.y],{id:[0,"id"],required:[1,"required"]},null),t.Fb(2048,[[10,4],[11,4]],I.d,null,[P.b]),(l()(),t.rb(78,0,null,4,3,"mat-datepicker-toggle",[["class","mat-datepicker-toggle"],["matSuffix",""]],[[1,"tabindex",0],[2,"mat-datepicker-toggle-active",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"focus"]],function(l,n,e){var a=!0;return"focus"===n&&(a=!1!==t.Bb(l,79)._button.focus()&&a),a},r.e,r.d)),t.qb(79,1753088,null,1,il.k,[il.i,t.h,[8,null]],{datepicker:[0,"datepicker"]},null),t.Gb(603979776,19,{_customIcon:0}),t.qb(81,16384,[[18,4]],0,I.h,[],null,null),(l()(),t.rb(82,16777216,null,1,1,"mat-datepicker",[],null,null,null,r.f,r.c)),t.qb(83,180224,[["picker",4]],0,il.f,[c.e,ol.c,t.y,t.P,il.a,[2,T.c],[2,U.b],[2,g.d]],null,null),(l()(),t.rb(84,0,null,6,2,"mat-hint",[["align","start"],["class","mat-hint"]],[[2,"mat-right",null],[1,"id",0],[1,"align",0]],null,null,null,null)),t.qb(85,16384,[[16,4]],0,I.f,[],{align:[0,"align"]},null),(l()(),t.Ib(-1,null,["The date of the first row of data in the file"])),(l()(),t.gb(16777216,null,5,1,null,gl)),t.qb(88,16384,null,0,g.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.rb(89,0,null,null,1,"slu-file-upload",[],null,[[null,"contents"]],function(l,n,e){var t=!0;return"contents"===n&&(t=!1!==l.component.onFileContentsChange(e)&&t),t},G.b,G.a)),t.qb(90,114688,null,0,E.a,[t.D],{parentForm:[0,"parentForm"],extension:[1,"extension"],errorMessage:[2,"errorMessage"]},{contents:"contents"}),(l()(),t.rb(91,0,null,null,3,"div",[["class","flex-row end"]],null,null,null,null,null)),(l()(),t.rb(92,0,null,null,2,"button",[["color","primary"],["mat-raised-button",""],["type","submit"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,m.d,m.b)),t.qb(93,180224,null,0,p.b,[t.k,f.h,[2,h.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(l()(),t.Ib(-1,0,[" Upload "]))],function(l,n){var e=n.component;l(n,11,0,e.inputUploadForm),l(n,17,0),l(n,19,0,e.inputUploadForm),l(n,36,0,""),l(n,39,0,"reference"),l(n,42,0,"reference","","text"),l(n,45,0,"start"),l(n,48,0,"end"),l(n,51,0,e.inputUploadForm.controls.reference.invalid),l(n,68,0,""),l(n,69,0,t.Bb(n,83)),l(n,72,0,"startDate"),l(n,76,0,"startDate",""),l(n,79,0,t.Bb(n,83)),l(n,85,0,"start"),l(n,88,0,e.inputUploadForm.controls.startDate.invalid),l(n,90,0,e.inputUploadForm,e.fileTypeExtension,"You must select an input file to upload"),l(n,93,0,e.inputUploadForm.invalid||e.inputUploadForm.pending||e.isUploading,"primary")},function(l,n){l(n,9,0,t.Bb(n,13).ngClassUntouched,t.Bb(n,13).ngClassTouched,t.Bb(n,13).ngClassPristine,t.Bb(n,13).ngClassDirty,t.Bb(n,13).ngClassValid,t.Bb(n,13).ngClassInvalid,t.Bb(n,13).ngClassPending),l(n,20,1,["standard"==t.Bb(n,21).appearance,"fill"==t.Bb(n,21).appearance,"outline"==t.Bb(n,21).appearance,"legacy"==t.Bb(n,21).appearance,t.Bb(n,21)._control.errorState,t.Bb(n,21)._canLabelFloat,t.Bb(n,21)._shouldLabelFloat(),t.Bb(n,21)._hasFloatingLabel(),t.Bb(n,21)._hideControlPlaceholder(),t.Bb(n,21)._control.disabled,t.Bb(n,21)._control.autofilled,t.Bb(n,21)._control.focused,"accent"==t.Bb(n,21).color,"warn"==t.Bb(n,21).color,t.Bb(n,21)._shouldForward("untouched"),t.Bb(n,21)._shouldForward("touched"),t.Bb(n,21)._shouldForward("pristine"),t.Bb(n,21)._shouldForward("dirty"),t.Bb(n,21)._shouldForward("valid"),t.Bb(n,21)._shouldForward("invalid"),t.Bb(n,21)._shouldForward("pending"),!t.Bb(n,21)._animationsEnabled]),l(n,34,1,[t.Bb(n,36).required?"":null,t.Bb(n,41).ngClassUntouched,t.Bb(n,41).ngClassTouched,t.Bb(n,41).ngClassPristine,t.Bb(n,41).ngClassDirty,t.Bb(n,41).ngClassValid,t.Bb(n,41).ngClassInvalid,t.Bb(n,41).ngClassPending,t.Bb(n,42)._isServer,t.Bb(n,42).id,t.Bb(n,42).placeholder,t.Bb(n,42).disabled,t.Bb(n,42).required,t.Bb(n,42).readonly&&!t.Bb(n,42)._isNativeSelect||null,t.Bb(n,42)._ariaDescribedby||null,t.Bb(n,42).errorState,t.Bb(n,42).required.toString()]),l(n,44,0,"end"==t.Bb(n,45).align,t.Bb(n,45).id,null),l(n,47,0,"end"==t.Bb(n,48).align,t.Bb(n,48).id,null),l(n,49,0,(null==t.Bb(n,34).value?null:t.Bb(n,34).value.length)||0),l(n,52,1,["standard"==t.Bb(n,53).appearance,"fill"==t.Bb(n,53).appearance,"outline"==t.Bb(n,53).appearance,"legacy"==t.Bb(n,53).appearance,t.Bb(n,53)._control.errorState,t.Bb(n,53)._canLabelFloat,t.Bb(n,53)._shouldLabelFloat(),t.Bb(n,53)._hasFloatingLabel(),t.Bb(n,53)._hideControlPlaceholder(),t.Bb(n,53)._control.disabled,t.Bb(n,53)._control.autofilled,t.Bb(n,53)._control.focused,"accent"==t.Bb(n,53).color,"warn"==t.Bb(n,53).color,t.Bb(n,53)._shouldForward("untouched"),t.Bb(n,53)._shouldForward("touched"),t.Bb(n,53)._shouldForward("pristine"),t.Bb(n,53)._shouldForward("dirty"),t.Bb(n,53)._shouldForward("valid"),t.Bb(n,53)._shouldForward("invalid"),t.Bb(n,53)._shouldForward("pending"),!t.Bb(n,53)._animationsEnabled]),l(n,66,1,[t.Bb(n,68).required?"":null,(null==t.Bb(n,69)._datepicker?null:t.Bb(n,69)._datepicker.opened)&&t.Bb(n,69)._datepicker.id||null,t.Bb(n,69).min?t.Bb(n,69)._dateAdapter.toIso8601(t.Bb(n,69).min):null,t.Bb(n,69).max?t.Bb(n,69)._dateAdapter.toIso8601(t.Bb(n,69).max):null,t.Bb(n,69).disabled,t.Bb(n,74).ngClassUntouched,t.Bb(n,74).ngClassTouched,t.Bb(n,74).ngClassPristine,t.Bb(n,74).ngClassDirty,t.Bb(n,74).ngClassValid,t.Bb(n,74).ngClassInvalid,t.Bb(n,74).ngClassPending,t.Bb(n,76)._isServer,t.Bb(n,76).id,t.Bb(n,76).placeholder,t.Bb(n,76).disabled,t.Bb(n,76).required,t.Bb(n,76).readonly&&!t.Bb(n,76)._isNativeSelect||null,t.Bb(n,76)._ariaDescribedby||null,t.Bb(n,76).errorState,t.Bb(n,76).required.toString()]),l(n,78,0,-1,t.Bb(n,79).datepicker&&t.Bb(n,79).datepicker.opened,t.Bb(n,79).datepicker&&"accent"===t.Bb(n,79).datepicker.color,t.Bb(n,79).datepicker&&"warn"===t.Bb(n,79).datepicker.color),l(n,84,0,"end"==t.Bb(n,85).align,t.Bb(n,85).id,null),l(n,92,0,t.Bb(n,93).disabled||null,"NoopAnimations"===t.Bb(n,93)._animationMode)})}var vl=e("AIp+");class _l{constructor(l,n){this.dialogRef=l,this.data=n}}class ql{constructor(l,n,e,a,u){this.fb=l,this.validatorService=n,this.inputFileService=e,this.parameterService=a,this.dialog=u,this.complete=new t.m,this.fileTypeExtension=".ssf",this.fileTypeId=V.f.STRUCTURE,this.isUploading=!1}ngOnInit(){this.structureUploadForm=this.fb.group({reference:[null,_.v.compose([_.v.required,_.v.minLength(3),_.v.maxLength(45)]),this.validatorService.referenceValidator(this.fileTypeId)]})}getReferenceError(){return this.structureUploadForm.controls.reference.hasError("required")?"You must enter a reference":this.structureUploadForm.controls.reference.hasError("minlength")?"The reference is too short":this.structureUploadForm.controls.reference.hasError("maxlength")?"The reference is too long":this.structureUploadForm.controls.reference.hasError("referenceExists")?"A file with this reference already exists":""}onSubmit(){this.upload(this.filename)}onFileContentsChange(l){this.complete.emit(!1),this.filename=l.filename;const n=l.contents.split(/\r?\n/).filter(l=>!!l.trim());if(this.structure=new vl.a,this.structure.import(n),!this.structure.reachIndexesMatch(this.indexes))throw new Error("Structure file import error: Structure file reach names do not match parameter set reach names")}onParameterSetSelect(l){this.parameterSet=l,this.parameterService.getParameterIndexes(+this.parameterSet.id).subscribe(l=>{this.indexes=JSON.parse(l[0].result)})}upload(l){this.isUploading=!0,this.inputFileService.uploadStructure(this.structure,l,this.structureUploadForm.value.reference,this.parameterSet.id).subscribe(l=>{"File already exists"===l?(this.complete.emit(!1),this.openDialog(!1)):(this.complete.emit(!0),this.openDialog())})}openDialog(l=!0){this.dialog.open(_l,{width:"350px",data:{success:l}}).afterClosed().subscribe(l=>{this.resetForm()})}resetForm(){this.structureUploadForm.markAsPristine(),this.structureUploadForm.reset(),this.isUploading=!1}}var yl=t.pb({encapsulation:2,styles:[],data:{}});function Fl(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,13,null,null,null,null,null,null,null)),(l()(),t.rb(1,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),t.qb(2,81920,null,0,c.m,[[2,c.l],t.k,c.e],null,null),(l()(),t.Ib(-1,null,["Upload complete"])),(l()(),t.rb(4,0,null,null,3,"div",[["class","mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),t.qb(5,16384,null,0,c.j,[],null,null),(l()(),t.rb(6,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["The structure file was successfully uploaded and imported."])),(l()(),t.rb(8,0,null,null,5,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),t.qb(9,16384,null,0,c.f,[],null,null),(l()(),t.rb(10,0,null,null,3,"button",[["mat-raised-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0]],[[null,"click"]],function(l,n,e){var a=!0;return"click"===n&&(a=!1!==t.Bb(l,12).dialogRef.close(t.Bb(l,12).dialogResult)&&a),a},m.d,m.b)),t.qb(11,180224,null,0,p.b,[t.k,f.h,[2,h.a]],null,null),t.qb(12,606208,null,0,c.g,[[2,c.l],t.k,c.e],{dialogResult:[0,"dialogResult"]},null),(l()(),t.Ib(-1,0,["Ok"]))],function(l,n){l(n,2,0),l(n,12,0,!0)},function(l,n){l(n,1,0,t.Bb(n,2).id),l(n,10,0,t.Bb(n,11).disabled||null,"NoopAnimations"===t.Bb(n,11)._animationMode,t.Bb(n,12).ariaLabel||null)})}function Sl(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,2,"h1",[["class","mat-dialog-title"],["mat-dialog-title",""]],[[8,"id",0]],null,null,null,null)),t.qb(1,81920,null,0,c.m,[[2,c.l],t.k,c.e],null,null),(l()(),t.Ib(-1,null,["File already exists"])),(l()(),t.rb(3,0,null,null,3,"div",[["class","mat-dialog-content"],["mat-dialog-content",""]],null,null,null,null,null)),t.qb(4,16384,null,0,c.j,[],null,null),(l()(),t.rb(5,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["The structure file already exists in the database. It has NOT been imported."])),(l()(),t.rb(7,0,null,null,5,"div",[["class","mat-dialog-actions"],["mat-dialog-actions",""]],null,null,null,null,null)),t.qb(8,16384,null,0,c.f,[],null,null),(l()(),t.rb(9,0,null,null,3,"button",[["mat-raised-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null],[1,"aria-label",0]],[[null,"click"]],function(l,n,e){var a=!0;return"click"===n&&(a=!1!==t.Bb(l,11).dialogRef.close(t.Bb(l,11).dialogResult)&&a),a},m.d,m.b)),t.qb(10,180224,null,0,p.b,[t.k,f.h,[2,h.a]],null,null),t.qb(11,606208,null,0,c.g,[[2,c.l],t.k,c.e],{dialogResult:[0,"dialogResult"]},null),(l()(),t.Ib(-1,0,["Ok"]))],function(l,n){l(n,1,0),l(n,11,0,!0)},function(l,n){l(n,0,0,t.Bb(n,1).id),l(n,9,0,t.Bb(n,10).disabled||null,"NoopAnimations"===t.Bb(n,10)._animationMode,t.Bb(n,11).ariaLabel||null)})}function Cl(l){return t.Kb(0,[(l()(),t.gb(16777216,null,null,1,null,Fl)),t.qb(1,16384,null,0,g.k,[t.P,t.M],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),t.gb(0,[["exists",2]],null,0,null,Sl))],function(l,n){l(n,1,0,n.component.data.success,t.Bb(n,2))},null)}function Il(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,1,"slu-dialog-structure-file-uploaded",[],null,null,null,Cl,yl)),t.qb(1,49152,null,0,_l,[c.l,c.a],null,null)],null,null)}var wl=t.nb("slu-dialog-structure-file-uploaded",_l,Il,{},{},[]),kl=t.pb({encapsulation:0,styles:[[""]],data:{}});function xl(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,2,"mat-error",[["class","mat-error"],["role","alert"]],[[1,"id",0]],null,null,null,null)),t.qb(1,16384,[[6,4]],0,I.b,[],null,null),(l()(),t.Ib(2,null,["",""]))],null,function(l,n){var e=n.component;l(n,0,0,t.Bb(n,1).id),l(n,2,0,e.getReferenceError())})}function Tl(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,54,"mat-card",[["class","mat-card"]],null,null,null,w.d,w.a)),t.qb(1,49152,null,0,k.a,[],null,null),(l()(),t.rb(2,0,null,0,4,"mat-card-header",[["class","mat-card-header"]],null,null,null,w.c,w.b)),t.qb(3,49152,null,0,k.c,[],null,null),(l()(),t.rb(4,0,null,1,2,"mat-card-title",[["class","mat-card-title"]],null,null,null,null,null)),t.qb(5,16384,null,0,k.f,[],null,null),(l()(),t.Ib(-1,null,["Reach structure file"])),(l()(),t.rb(7,0,null,0,47,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),t.qb(8,16384,null,0,k.b,[],null,null),(l()(),t.rb(9,0,null,null,45,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,e){var a=!0,u=l.component;return"submit"===n&&(a=!1!==t.Bb(l,11).onSubmit(e)&&a),"reset"===n&&(a=!1!==t.Bb(l,11).onReset()&&a),"ngSubmit"===n&&(a=!1!==u.onSubmit()&&a),a},null,null)),t.qb(10,16384,null,0,_.z,[],null,null),t.qb(11,540672,null,0,_.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t.Fb(2048,null,_.c,null,[_.j]),t.qb(13,16384,null,0,_.p,[[4,_.c]],null,null),(l()(),t.rb(14,0,null,null,40,"div",[["class","flex-column space"]],null,null,null,null,null)),(l()(),t.rb(15,0,null,null,1,"slu-parameter-set-select",[],null,[[null,"parameterSet"]],function(l,n,e){var t=!0;return"parameterSet"===n&&(t=!1!==l.component.onParameterSetSelect(e)&&t),t},ul.b,ul.a)),t.qb(16,638976,null,0,rl.a,[B.a],{parentForm:[0,"parentForm"]},{parameterSet:"parameterSet"}),(l()(),t.rb(17,0,null,null,31,"mat-form-field",[["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,x.b,x.a)),t.qb(18,7520256,null,9,I.c,[t.k,t.h,[2,T.j],[2,U.b],[2,I.a],D.a,t.y,[2,h.a]],null,null),t.Gb(603979776,1,{_controlNonStatic:0}),t.Gb(335544320,2,{_controlStatic:0}),t.Gb(603979776,3,{_labelChildNonStatic:0}),t.Gb(335544320,4,{_labelChildStatic:0}),t.Gb(603979776,5,{_placeholderChild:0}),t.Gb(603979776,6,{_errorChildren:1}),t.Gb(603979776,7,{_hintChildren:1}),t.Gb(603979776,8,{_prefixChildren:1}),t.Gb(603979776,9,{_suffixChildren:1}),(l()(),t.rb(28,0,null,3,2,"mat-label",[],null,null,null,null,null)),t.qb(29,16384,[[3,4],[4,4]],0,I.g,[],null,null),(l()(),t.Ib(-1,null,["Reference"])),(l()(),t.rb(31,0,[["referenceText",1]],1,9,"input",[["class","mat-input-element mat-form-field-autofill-control"],["formControlName","reference"],["id","reference"],["matInput",""],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(l,n,e){var a=!0;return"input"===n&&(a=!1!==t.Bb(l,32)._handleInput(e.target.value)&&a),"blur"===n&&(a=!1!==t.Bb(l,32).onTouched()&&a),"compositionstart"===n&&(a=!1!==t.Bb(l,32)._compositionStart()&&a),"compositionend"===n&&(a=!1!==t.Bb(l,32)._compositionEnd(e.target.value)&&a),"blur"===n&&(a=!1!==t.Bb(l,39)._focusChanged(!1)&&a),"focus"===n&&(a=!1!==t.Bb(l,39)._focusChanged(!0)&&a),"input"===n&&(a=!1!==t.Bb(l,39)._onInput()&&a),a},null,null)),t.qb(32,16384,null,0,_.d,[t.E,t.k,[2,_.a]],null,null),t.qb(33,16384,null,0,_.u,[],{required:[0,"required"]},null),t.Fb(1024,null,_.l,function(l){return[l]},[_.u]),t.Fb(1024,null,_.m,function(l){return[l]},[_.d]),t.qb(36,671744,null,0,_.h,[[3,_.c],[6,_.l],[8,null],[6,_.m],[2,_.y]],{name:[0,"name"]},null),t.Fb(2048,null,_.n,null,[_.h]),t.qb(38,16384,null,0,_.o,[[4,_.n]],null,null),t.qb(39,999424,null,0,P.b,[t.k,D.a,[6,_.n],[2,_.q],[2,_.j],T.d,[8,null],z.a,t.y],{id:[0,"id"],required:[1,"required"],type:[2,"type"]},null),t.Fb(2048,[[1,4],[2,4]],I.d,null,[P.b]),(l()(),t.rb(41,0,null,6,2,"mat-hint",[["align","start"],["class","mat-hint"]],[[2,"mat-right",null],[1,"id",0],[1,"align",0]],null,null,null,null)),t.qb(42,16384,[[7,4]],0,I.f,[],{align:[0,"align"]},null),(l()(),t.Ib(-1,null,["To help you identify this input file"])),(l()(),t.rb(44,0,null,7,2,"mat-hint",[["align","end"],["class","mat-hint"]],[[2,"mat-right",null],[1,"id",0],[1,"align",0]],null,null,null,null)),t.qb(45,16384,[[7,4]],0,I.f,[],{align:[0,"align"]},null),(l()(),t.Ib(46,null,["","/45"])),(l()(),t.gb(16777216,null,5,1,null,xl)),t.qb(48,16384,null,0,g.k,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(l()(),t.rb(49,0,null,null,1,"slu-file-upload",[],null,[[null,"contents"]],function(l,n,e){var t=!0;return"contents"===n&&(t=!1!==l.component.onFileContentsChange(e)&&t),t},G.b,G.a)),t.qb(50,114688,null,0,E.a,[t.D],{parentForm:[0,"parentForm"],extension:[1,"extension"],errorMessage:[2,"errorMessage"]},{contents:"contents"}),(l()(),t.rb(51,0,null,null,3,"div",[["class","flex-row end"]],null,null,null,null,null)),(l()(),t.rb(52,0,null,null,2,"button",[["color","primary"],["mat-raised-button",""],["type","submit"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,m.d,m.b)),t.qb(53,180224,null,0,p.b,[t.k,f.h,[2,h.a]],{disabled:[0,"disabled"],color:[1,"color"]},null),(l()(),t.Ib(-1,0,[" Upload "]))],function(l,n){var e=n.component;l(n,11,0,e.structureUploadForm),l(n,16,0,e.structureUploadForm),l(n,33,0,""),l(n,36,0,"reference"),l(n,39,0,"reference","","text"),l(n,42,0,"start"),l(n,45,0,"end"),l(n,48,0,e.structureUploadForm.controls.reference.invalid),l(n,50,0,e.structureUploadForm,e.fileTypeExtension,"You must select a file to upload"),l(n,53,0,e.structureUploadForm.invalid||e.structureUploadForm.pending||e.isUploading,"primary")},function(l,n){l(n,9,0,t.Bb(n,13).ngClassUntouched,t.Bb(n,13).ngClassTouched,t.Bb(n,13).ngClassPristine,t.Bb(n,13).ngClassDirty,t.Bb(n,13).ngClassValid,t.Bb(n,13).ngClassInvalid,t.Bb(n,13).ngClassPending),l(n,17,1,["standard"==t.Bb(n,18).appearance,"fill"==t.Bb(n,18).appearance,"outline"==t.Bb(n,18).appearance,"legacy"==t.Bb(n,18).appearance,t.Bb(n,18)._control.errorState,t.Bb(n,18)._canLabelFloat,t.Bb(n,18)._shouldLabelFloat(),t.Bb(n,18)._hasFloatingLabel(),t.Bb(n,18)._hideControlPlaceholder(),t.Bb(n,18)._control.disabled,t.Bb(n,18)._control.autofilled,t.Bb(n,18)._control.focused,"accent"==t.Bb(n,18).color,"warn"==t.Bb(n,18).color,t.Bb(n,18)._shouldForward("untouched"),t.Bb(n,18)._shouldForward("touched"),t.Bb(n,18)._shouldForward("pristine"),t.Bb(n,18)._shouldForward("dirty"),t.Bb(n,18)._shouldForward("valid"),t.Bb(n,18)._shouldForward("invalid"),t.Bb(n,18)._shouldForward("pending"),!t.Bb(n,18)._animationsEnabled]),l(n,31,1,[t.Bb(n,33).required?"":null,t.Bb(n,38).ngClassUntouched,t.Bb(n,38).ngClassTouched,t.Bb(n,38).ngClassPristine,t.Bb(n,38).ngClassDirty,t.Bb(n,38).ngClassValid,t.Bb(n,38).ngClassInvalid,t.Bb(n,38).ngClassPending,t.Bb(n,39)._isServer,t.Bb(n,39).id,t.Bb(n,39).placeholder,t.Bb(n,39).disabled,t.Bb(n,39).required,t.Bb(n,39).readonly&&!t.Bb(n,39)._isNativeSelect||null,t.Bb(n,39)._ariaDescribedby||null,t.Bb(n,39).errorState,t.Bb(n,39).required.toString()]),l(n,41,0,"end"==t.Bb(n,42).align,t.Bb(n,42).id,null),l(n,44,0,"end"==t.Bb(n,45).align,t.Bb(n,45).id,null),l(n,46,0,(null==t.Bb(n,31).value?null:t.Bb(n,31).value.length)||0),l(n,52,0,t.Bb(n,53).disabled||null,"NoopAnimations"===t.Bb(n,53)._animationMode)})}class Ul{constructor(){this.isParameterDownloadVisible=!0,this.isInputDownloadVisible=!0}}var Dl=t.pb({encapsulation:2,styles:[],data:{}});function Pl(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,1,"h2",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Upload data"])),(l()(),t.rb(2,0,null,null,2,"p",[],null,null,null,null,null)),(l()(),t.rb(3,0,null,null,1,"em",[],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Import Desktop PERSiST files for use in Web PERSiST"])),(l()(),t.rb(5,0,null,null,6,"div",[["class","flex-row"]],null,null,null,null,null)),(l()(),t.rb(6,0,null,null,1,"slu-parameter-upload",[],null,[[null,"complete"]],function(l,n,e){var t=!0;return"complete"===n&&(t=!1!==(l.component.isParameterDownloadVisible=e)&&t),t},K,Y)),t.qb(7,114688,null,0,C,[_.e,B.a,q.a,c.e],null,{complete:"complete"}),(l()(),t.rb(8,0,null,null,1,"slu-input-upload",[],null,[[null,"complete"]],function(l,n,e){var t=!0;return"complete"===n&&(t=!1!==(l.component.isInputDownloadVisible=e)&&t),t},Bl,fl)),t.qb(9,114688,null,0,W,[_.e,q.a,J.a,B.a,c.e],null,{complete:"complete"}),(l()(),t.rb(10,0,null,null,1,"slu-structure-upload",[],null,null,null,Tl,kl)),t.qb(11,114688,null,0,ql,[_.e,q.a,J.a,B.a,c.e],null,null)],function(l,n){l(n,7,0),l(n,9,0),l(n,11,0)},null)}function zl(l){return t.Kb(0,[(l()(),t.rb(0,0,null,null,1,"slu-import-data",[],null,null,null,Pl,Dl)),t.qb(1,49152,null,0,Ul,[],null,null)],null,null)}var Gl=t.nb("slu-import-data",Ul,zl,{},{},[]),El=e("POq0"),Ml=e("fgD+"),Rl=e("Mz6y"),jl=e("cUpR"),Ol=e("FVPZ"),Ll=e("BzsH"),Nl=e("aLn0"),Yl=e("zMNK"),Al=e("Gi4r"),Kl=e("rWV4"),Vl=e("ZfjJ"),Jl=e("iInd"),Hl=e("lwm9"),Wl=e("zQui"),Xl=e("8rEH"),Zl=e("pBi1"),$l=e("dFDH"),Ql=e("b/4Z");class ln{}e.d(n,"ImportDataModuleNgFactory",function(){return nn});var nn=t.ob(a,[],function(l){return t.yb([t.zb(512,t.j,t.bb,[[8,[u.a,r.b,r.a,i.a,o.a,d.a,s.a,s.b,b.a,Gl,N,pl,wl]],[3,t.j],t.w]),t.zb(4608,g.m,g.l,[t.t,[2,g.C]]),t.zb(4608,_.x,_.x,[]),t.zb(4608,_.e,_.e,[]),t.zb(4608,ol.c,ol.c,[ol.i,ol.e,t.j,ol.h,ol.f,t.q,t.y,g.d,U.b,[2,g.g]]),t.zb(5120,ol.j,ol.k,[ol.c]),t.zb(5120,c.c,c.d,[ol.c]),t.zb(135680,c.e,c.e,[ol.c,t.q,[2,g.g],[2,c.b],c.c,[3,c.e],ol.e]),t.zb(4608,El.c,El.c,[]),t.zb(4608,il.i,il.i,[]),t.zb(5120,il.a,il.b,[ol.c]),t.zb(4608,T.c,Ml.d,[T.h,Ml.a]),t.zb(4608,T.d,T.d,[]),t.zb(5120,Rl.b,Rl.c,[ol.c]),t.zb(4608,jl.e,T.e,[[2,T.i],[2,T.n]]),t.zb(5120,$.a,$.b,[ol.c]),t.zb(1073742336,g.c,g.c,[]),t.zb(1073742336,U.a,U.a,[]),t.zb(1073742336,T.n,T.n,[[2,T.f],[2,jl.f]]),t.zb(1073742336,k.d,k.d,[]),t.zb(1073742336,T.o,T.o,[]),t.zb(1073742336,Ol.a,Ol.a,[]),t.zb(1073742336,Ll.b,Ll.b,[]),t.zb(1073742336,Nl.a,Nl.a,[]),t.zb(1073742336,_.w,_.w,[]),t.zb(1073742336,_.k,_.k,[]),t.zb(1073742336,_.t,_.t,[]),t.zb(1073742336,D.b,D.b,[]),t.zb(1073742336,T.w,T.w,[]),t.zb(1073742336,p.c,p.c,[]),t.zb(1073742336,Yl.g,Yl.g,[]),t.zb(1073742336,Q.c,Q.c,[]),t.zb(1073742336,ol.g,ol.g,[]),t.zb(1073742336,c.k,c.k,[]),t.zb(1073742336,El.d,El.d,[]),t.zb(1073742336,f.a,f.a,[]),t.zb(1073742336,il.j,il.j,[]),t.zb(1073742336,Ml.e,Ml.e,[]),t.zb(1073742336,Ml.c,Ml.c,[]),t.zb(1073742336,z.c,z.c,[]),t.zb(1073742336,I.e,I.e,[]),t.zb(1073742336,P.c,P.c,[]),t.zb(1073742336,Al.c,Al.c,[]),t.zb(1073742336,Rl.e,Rl.e,[]),t.zb(1073742336,T.u,T.u,[]),t.zb(1073742336,T.s,T.s,[]),t.zb(1073742336,$.d,$.d,[]),t.zb(1073742336,Kl.k,Kl.k,[]),t.zb(1073742336,Vl.a,Vl.a,[]),t.zb(1073742336,Jl.n,Jl.n,[[2,Jl.s],[2,Jl.l]]),t.zb(1073742336,Hl.d,Hl.d,[]),t.zb(1073742336,Wl.p,Wl.p,[]),t.zb(1073742336,Xl.l,Xl.l,[]),t.zb(1073742336,Zl.c,Zl.c,[]),t.zb(1073742336,$l.e,$l.e,[]),t.zb(1073742336,Ql.a,Ql.a,[]),t.zb(1073742336,ln,ln,[]),t.zb(1073742336,a,a,[]),t.zb(256,c.b,Vl.b,[]),t.zb(256,T.g,Ml.b,[]),t.zb(1024,Jl.j,function(){return[[{path:"",component:Ul}]]},[])])})}}]);